<div class="container">
  <h1>My favourite albums</h1>
  <p>I've written something about all my favourite albums! If you're looking for a recommendation, you can have a little browse here.</p>
  <div class="search-container">
    <input type="text" [(ngModel)]="searchTerm" placeholder="Search albums...">
  </div>
  <div class="sorting-buttons">
    <button (click)="sortAlbums('random')">Random Order</button>
    <button (click)="sortAlbums('alphabeticalName')">Alphabetical by Album</button>
    <button (click)="sortAlbums('alphabeticalArtist')">Alphabetical by Artist</button>
    <button (click)="sortAlbums('releaseDate')">By Release Date</button>
  </div>
  <div class="tag-filter-container">
    <p class="filter-text">Filter by Tags:</p>
    <ul>
      @for (tag of availableTags; track tag; let i = $index) {
        <li class="tag-checkbox">
          <input type="checkbox" [id]="'tag-' + i" [value]="tag" (change)="toggleTagSelection(tag)" [checked]="selectedTags.includes(tag)">
          <label [for]="'tag-' + i">{{ tag }}</label>
        </li>
      }
    </ul>
  </div>
  <ul>
    @for (album of filteredAlbums.slice(0, itemsToShow); track album) {
      <li class="album-card" (click)="showDescription(album)">
        <div class="album-image-container" [style.border-color]="album.description ? 'inherit' : 'red'"
          [style.border-style]="album.description ? 'none' : 'solid'"
          [style.border-width]="album.description ? '0' : '2px'">
          <img [ngSrc]="imageService.imageUrl('/music/albums/' + album.filename)" [alt]="album.name" class="album-image" width="200" height="200">
        </div>
        <div class="album-info" [style.background-color]="album.color" [style.color]="album.textColor">
          <h2 class="album-name">{{album.artist}} - {{ album.name }}</h2>
          <span class="album-date" >{{ album.releaseyear }}</span>
        </div>
      </li>
    }
  </ul>
  <div #scrollAnchor class="scroll-anchor"></div>
</div>

@if (selectedAlbum) {
  <app-album-modal [selectedAlbum]="selectedAlbum" (close)="closeDescription()"></app-album-modal>
}
